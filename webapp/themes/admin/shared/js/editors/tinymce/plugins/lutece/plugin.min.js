tinymce.PluginManager.requireLangPack( 'lutece', 'fr_FR' );
tinymce.PluginManager.add( 'lutece', function( editor, url){
    editor.addButton( "lutece", {
        icon:true,
        image: "themes/admin/shared/js/editors/tinymce/plugins/lutece/img/lutece.png",
        tooltip: "Insert Lutece Link",
        onclick:function(){
            editor.windowManager.open({
                    title:"Lutece", 
                    url: "jsp/admin/insert/GetAvailableInsertServices.jsp?input=" + editor.name + "&mode=0&selected_text=" + editor.selection.getContent({format : 'text'}) ,
                    width:800,
                    height:500,
                    buttons:[{text:"Close",onclick:"close"}]
                }
            )}
    }),

    editor.addMenuItem("lutece",{
        image: "themes/admin/shared/js/editors/tinymce/plugins/lutece/img/lutece.png",
        text:"Insert Lutece Link",
        context:"insert",
        prependToContext:!0,
        onclick:function(){
            editor.windowManager.open(
                {
                    title:"Lutece", 
                    url: "jsp/admin/insert/GetAvailableInsertServices.jsp?input=tinymce&selected_text=&mode=0",
                    width:800,
                    height:600,
                    buttons:[ {text:"Close", onclick:"close"} ]
                }
        )}
    }),
    
    editor.addButton("luteceImage",{
        icon: "image", 
        tooltip: "Insert Image",
        onclick:function(){
            editor.windowManager.open({
                title:"Image",
                url: "jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type="
                    + editor.getParam("lutece_insert_service_media_type_image") 
                    + "&browser_id_space="
                    + editor.getParam("lutece_insert_service_media_type_image_space") 
                    + "&browser_selected_space_id=" + editor.getParam("lutece_insert_service_media_type_image_space") 
                    + "&input=" + editor.name 
                    + "&selected_text=" + editor.selection.getContent({format : 'text'}) ,
                width:800,
                height:600,
                buttons:[{text:"Close",onclick:"close"}]
            }
        )}
    }),
    
    editor.addButton("lutecePdf",{
        icon: 'newdocument',
        tooltip: "Insert PDF",
        onclick:function(){
            editor.windowManager.open(
                {title:"Image",
                url: "jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type="
                    + editor.getParam("lutece_insert_service_media_type_pdf") 
                    + "&browser_id_space="  
                    + editor.getParam("lutece_insert_service_media_type_pdf_space") 
                    + "&browser_selected_space_id=" + editor.getParam("lutece_insert_service_media_type_pdf_space") 
                    + "&input=" + editor.name 
                    + "&selected_text=" + editor.selection.getContent({format : 'text'}), 
                width:800,
                height:500,
                buttons:[{text:"Close",onclick:"close"}]
            }
        )}
    })
    // PageLinkService button
    editor.addButton("lutecePageLink", {
        tooltip: "Add link to site page",
        icon:true,
        image: "themes/admin/shared/js/editors/tinymce/plugins/lutece/img/lutece.png",
        onclick:function(){
            editor.windowManager.open(
                {title:"Image",
                url: "jsp/admin/insert/DisplayInsertService.jsp?insert_service_type=PAGE_INSERT_SERVICE&plugin_name=pagelinkservice&input=tinymce&mode=0" 
                    + "&selected_text=" + editor.selection.getContent({format : 'text'}), 
                width:800,
                height:500,
                buttons:[{text:"Close",onclick:"close"}]
            }
        )}
    });

});