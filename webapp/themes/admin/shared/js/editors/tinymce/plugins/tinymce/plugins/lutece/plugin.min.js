tinymce.PluginManager.requireLangPack('lutece', 'fr_FR');
tinymce.PluginManager.add('lutece', function(editor, url) {
        editor.addButton("lutece",{
                icon:true,
                image: url +'/img/lutece.png',
                tooltip: "Insert Lutece Link",
                onclick:function(){
                        console.log( "tinyMCE.base_url : " + url );
                        editor.windowManager.open(
                            {title:"Lutece",url: url + "../../../../../../jsp/admin/insert/GetAvailableInsertServices.jsp?input=" + editor.name + "&selected_text=" + editor.selection.getContent({format : 'text'}) ,width:800,height:500,buttons:[{text:"Close",onclick:"close"}]}
                        )}
	}),

	editor.addMenuItem("lutece",{
		image: url +'/img/lutece.png',
		text:"Insert Lutece Link",
		context:"insert",
		prependToContext:!0,
		onclick:function(){
			editor.windowManager.open(
				{title:"Lutece",url: url + "../../../../../../jsp/admin/insert/GetAvailableInsertServices.jsp?input=&selected_text=",width:800,height:600,buttons:[{text:"Close",onclick:"close"}]}
			)}
	}),
        
        
        editor.addButton("luteceImg",{
                icon: "image", 
                tooltip: "Insert Lutece Image",
                onclick:function(){
                        console.log( "tinyMCE.base_url : " + url );
                        editor.windowManager.open(
                            
                            	{title:"Image",
                                url: url + "../../../../../../jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type=1&browser_id_space="
                                    + editor.getParam("lutece_library_img_default_space_id") 
                                    + "&input=" + editor.name 
                                    + "&selected_text=" + editor.selection.getContent({format : 'text'}) ,
				width:800,
				height:600,
				buttons:[{text:"Close",onclick:"close"}]})}
	}),

	editor.addMenuItem("luteceImg",{
		icon: "image",
		text: "Insert Lutece Image",
		context:"insert_img",
		prependToContext:!0,
		onclick:function(){
			editor.windowManager.open(
                            {title:"Image",
                            url: url + "../../../../../../jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type=1&browser_id_space="
                                    + editor.getParam("lutece_library_img_default_space_id") 
                                    + "&input=" + editor.name 
                                    + "&selected_text=" + editor.selection.getContent({format : 'text'}) ,
                            width:800,
                            height:600,
                            buttons:[{text:"Close",onclick:"close"}]}
			)}
	}),
        
        
        editor.addButton("lutecePdf",{
                icon: 'newdocument',
                tooltip: "Insert Lutece PDF",
                onclick:function(){
                        console.log( "tinyMCE.base_url : " + url );
                        editor.windowManager.open(
                            {title:"Image",
                            url: url + "../../../../../../jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type=3&browser_id_space=" 
                                + editor.getParam("lutece_library_pdf_default_space_id") 
                                + "&input=" + editor.name 
                                + "&selected_text=" + editor.selection.getContent({format : 'text'}), 
                            width:800,
                            height:500,
                            buttons:[{text:"Close",onclick:"close"}]}
                        )}
	}),

	editor.addMenuItem("lutecePdf",{
		icon: 'newdocument',
		text:"Insert Lutece PDF",
		context:"insert_pdf",
		prependToContext:!0,
		onclick:function(){
			editor.windowManager.open(
                            {title:"Image",
                            url: url + "../../../../../../jsp/admin/plugins/library/SelectMedia.jsp?plugin_name=library&media_type=3&browser_id_space=" 
                                + editor.getParam("lutece_library_pdf_default_space_id") 
                                + "&input=" + editor.name 
                                + "&selected_text=" + editor.selection.getContent({format : 'text'}), 
                            width:800,
                            height:600,
                            buttons:[{text:"Close",onclick:"close"}]}
			)}
	})
});
