<#-- WARNING : be careful to white-space and lines break in FreeMarker macros.
 # This macro template can be used to output white-space-sensitive formats (like RSS files).
 # See http://dev.lutece.paris.fr/jira/browse/LUTECE-765
-->
<#-- Do not remove this comment -->
<#-- Information about this commons file -->
<#macro commonsFile>commons.html</#macro>
<#macro commonsName>Commons Bootstrap 3</#macro>
<#macro commonsDescription>Freemarker Commons macros powered by Bootstrap CSS Framework 3.3</#macro>
<#macro coreAdminCSSLinks>
<link href="css/admin/bootstrap2-compatibility.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/bootstrap.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/bootstrap-colorpicker.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/bootstrap-datepicker.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/bootstrap-flatpickr.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/jquery-ui.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/jquery-ui.structure.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/jquery-ui.theme.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="js/admin/lib/polipop/css/polipop.core.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="js/admin/lib/polipop/css/polipop.default.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/style/bootstrap4/all.min.css" rel="stylesheet"> <!-- Font-Awesome 5.8.1, provided by core -->
<link href="css/admin/ionicons.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="js/admin/lib/prism/prism.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/bootstrap-clockpicker.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/AdminLTE.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/skins/_all-skins.min.css" rel="stylesheet" > <!-- provided by core -->
<link href="css/admin/portal_admin.css" rel="stylesheet" > <!-- provided by core -->
</#macro>
<#macro coreAdminJSLinks>
<script src="js/admin/bootstrap.min.js"></script><!-- provided by core -->
<script src="js/admin/jquery/jquery-ui.min.js"></script> <!-- provided by core -->
<script src="js/admin/bootstrap-filestyle.min.js"></script> <!-- provided by core -->
<script src="js/admin/lib/polipop/polipop.min.js"></script> <!-- provided by core -->
<script src="js/admin/lib/prism/prism.js"></script> <!-- provided by core -->
<script src="js/admin/app.min.js"></script> <!-- provided by core -->
<script src="js/admin/admin.js"></script> <!-- provided by core -->
</#macro>

<#global gClassActive='active' />

<#macro sort jsp_url attribute id="" >
<#if jsp_url?contains("?")>
	<#local sort_url = jsp_url + "&amp;sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
<#else>
	<#local sort_url = jsp_url + "?sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
</#if>
<div class="btn-group" role="group" aria-label="sortButton">
	<a class="btn btn-default btn-flat btn-xs" id="sort${id!}_${attribute!}" href="${sort_url}true#sort${id!}_${attribute!}" title="#i18n{portal.util.sort.asc}" >
		<i class="fa fa-chevron-up"></i>
	</a>
	<a class="btn btn-default btn-flat btn-xs" href="${sort_url}false#sort${id!}_${attribute!}" title="#i18n{portal.util.sort.desc}">
		<i class="fa fa-chevron-down"></i>
	</a>
</div>
</#macro>

<#macro pagination paginator >
<#local nbLinkPagesToDisplay = 10 />
<#local offsetPrev = nbLinkPagesToDisplay / 2 />
<#local offsetNext = nbLinkPagesToDisplay / 2 />
<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
	<#local offsetPrev = paginator.pageCurrent - 1 />
	<#local offsetNext = nbLinkPagesToDisplay - offsetPrev />
<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
	<#local offsetNext = paginator.pagesCount - paginator.pageCurrent />
	<#local offsetPrev = nbLinkPagesToDisplay - offsetNext />
</#if>

<#if ( paginator.pagesCount > 1 )>
	<#if ( paginator.pageCurrent - offsetPrev > 1 )>
		<a href="${paginator.firstPageLink?xhtml}">
			<i class="fa fa-angle-double-left"></i>&nbsp;#i18n{portal.util.labelFirst}
		</a>
	</#if>
	<#if ( paginator.pageCurrent > 1 )>
		<a href="${paginator.previousPageLink?xhtml}">
			<i class="fa fa-angle-left"></i>&nbsp;#i18n{portal.util.labelPrevious}
		</a>
	<#else>
		&nbsp;&nbsp;
	</#if>
	<#if ( paginator.pageCurrent - offsetPrev > 1 )>
		<strong>...</strong>
	</#if>
	<#list paginator.pagesLinks as link>
		<#if link.index == paginator.pageCurrent>
			<strong>${link.name}</strong>
		<#else>
			<a href="${link.url?xhtml}">${link.name}</a>
		</#if>
	</#list>
	<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
		<strong>...</strong>
	</#if>
	<#if ( paginator.pageCurrent < paginator.pagesCount )>
		<a href="${paginator.nextPageLink?xhtml}">
			<i class="fa fa-angle-right"></i>&nbsp;#i18n{portal.util.labelNext}
		</a>
		<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
			<a href="${paginator.lastPageLink?xhtml}">
				<i class="fa fa-angle-double-right"></i>&nbsp;#i18n{portal.util.labelLast}
			</a>
		</#if>
	<#else>
		&nbsp;&nbsp;
	</#if>
</#if>
</#macro>

<#macro paginationAdmin paginator combo=0 form=1 nb_items_per_page=nb_items_per_page showcount=1 showall=0>
<#if (paginator.pagesCount > 1) >
	<@paginationPageLinks paginator=paginator />
</#if>
<@div align='right'>
	<#if form == 1 >
		<form method="post" class="form-inline">
	</#if>
	<@paginationItemCount paginator=paginator combo=combo nb_items_per_page=nb_items_per_page showcount=showcount showall=showall/>
	<#if form == 1 >
		</form>
	</#if>
</@div>
 </#macro>

<#macro paginationPageLinks paginator >
<#local nbLinkPagesToDisplay = 10 />
<#local offsetPrev = nbLinkPagesToDisplay / 2 />
<#local offsetNext = nbLinkPagesToDisplay / 2 />
<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
	<#local offsetPrev = paginator.pageCurrent - 1 />
	<#local offsetNext = nbLinkPagesToDisplay - offsetPrev />
<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
	<#local offsetNext = paginator.pagesCount - paginator.pageCurrent />
	<#local offsetPrev = nbLinkPagesToDisplay - offsetNext />
</#if>
<ul class="pagination pagination-sm">
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li>
		<@link href='${paginator.firstPageLink?xhtml}'>
			${paginator.labelFirst}
		</@link>
	</li>
</#if>
<#if (paginator.pageCurrent > 1) >
	<li class="previous">
		<@link href='${paginator.previousPageLink?xhtml}'>
			${paginator.labelPrevious}
		</@link>
	</li>
<#else>
	<li class="disabled">
		<@link href='${paginator.firstPageLink?xhtml}'>${paginator.labelPrevious}</@link>
	</li>
</#if>
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li>
		<@link href='${(paginator.pagesLinks?first).url?xhtml}'><strong>...</strong></@link>
	</li>
</#if>
<#list paginator.pagesLinks as pageLink>
	<#if ( pageLink.index == paginator.pageCurrent )>
		<li class="active">
			<@link href='${pageLink.url?xhtml}'>${pageLink.name}</@link>
		</li>
	<#else>
		<li>
			<@link href='${pageLink.url?xhtml}'>${pageLink.name}</@link>
		</li>
	</#if>
</#list>
<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
	<li>
		<@link href='${(paginator.pagesLinks?last).url?xhtml}'><strong>...</strong></@link>
	</li>
</#if>
<#if (paginator.pageCurrent < paginator.pagesCount) >
	<li class="next">
		<@link href='${paginator.nextPageLink?xhtml}'>
			${paginator.labelNext}
		</@link>
	</li>
	<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
		<li class="next">
			<@link href='${paginator.lastPageLink?xhtml}'>
				${paginator.labelLast}
			</@link>
		</li>
	</#if>
<#else>
	<li class="disabled">
		<@link href='${paginator.lastPageLink?xhtml}'>${paginator.labelNext}</@link>
	</li>
</#if>
</ul>
 </#macro>

<#macro paginationCombo paginator nb_items_per_page=nb_items_per_page showall=0>
<label>${paginator.labelItemCountPerPage}</label>
<div class="input-group">
	<select data-max-item="${paginator.itemsCount}" class="input-xs" name="${paginator.itemsPerPageParameterName}" id="${paginator.itemsPerPageParameterName}" title="${paginator.labelItemCountPerPage}">
  		<#list [ "10" , "20" , "50" , "100" ] as nb>
  			<#if nb_items_per_page = nb >
  				<option selected="selected" value="${nb}">${nb}</option>
  			<#else>
  				<option value="${nb}">${nb}</option>
  			</#if>
  		</#list>
  		<#if showall ==1>
  			<#if paginator.itemsCount &gt; 100 >
  				<option <#if nb_items_per_page?number = paginator.itemsCount?number >selected="selected"</#if> value="${paginator.itemsCount}" class="${nb_items_per_page}">#i18n{portal.util.labelAll}</option>
  			</#if>
  		</#if>
	</select>
	<span class="input-group-btn">
		<button class="btn btn-default btn-xs" type="submit" title="#i18n{portal.util.labelRefresh}">
			<i class="fa fa-sync"></i>
		</button>
	</span>
</div>
</#macro>

<#macro paginationItemCount paginator combo=0 nb_items_per_page=nb_items_per_page showcount=1 showall=0>
<#-- Display combo -->
<#if combo == 1 >
  <@paginationCombo paginator=paginator nb_items_per_page=nb_items_per_page showall=showall />
</#if>
<#-- Display item count -->
<#if showcount == 1 >
<span class="showcount">
	<#if (paginator.labelItemCount)?? && paginator.labelItemCount?has_content>&nbsp;-&nbsp;${paginator.labelItemCount} : </#if> ${paginator.itemsCount}
</span>
</#if>
</#macro>

<#-- NAVIGATION -->
<#macro item_navigation item_navigator id='item-navigator' align='' hideButtonTitle=[] buttonColor='info' buttonSize='sm'>
<#local class = alignmentSettings(align,'') />
<nav id="${id}" class="${class}">
<#if (item_navigator.currentItemId > 0)>
	<@aButton href='${item_navigator.previousPageLink?xhtml}' title='#i18n{portal.util.labelPrevious}' buttonIcon='arrow-left' color='${buttonColor}' hideTitle=hideButtonTitle size='${buttonSize}' />
</#if>
<#if (item_navigator.currentItemId < item_navigator.listItemSize - 1) >
	<@aButton href='${item_navigator.nextPageLink?xhtml}' title='#i18n{portal.util.labelNext}' buttonIcon='arrow-right' color='${buttonColor}' hideTitle=hideButtonTitle size='${buttonSize}' />
</#if>
</nav>
</#macro>

<#macro actionButtons button1Name='' button2Name='' i18nValue1Key='portal.admin.message.buttonValidate' i18nValue2Key='portal.admin.message.buttonCancel' url1='' url2='' icon1='save' icon2='times' offset=3>
	<@formGroup>
        <#if url1 != ''>
			<@aButton href='${url1}' buttonIcon=icon1 title='#i18n{${i18nValue1Key}}' />
        <#else>
			<@button type='submit' name='${button1Name}' buttonIcon=icon1 title='#i18n{${i18nValue1Key}}' />
        </#if>
        <#if url2 != ''>
			<@aButton href='${url2}' buttonIcon=icon2 title='#i18n{${i18nValue2Key}}' />
        <#else>
            <#if button2Name != ''>
				<@button type='submit' name='${button2Name}' buttonIcon=icon2 title='#i18n{${i18nValue2Key}}' color='default' />
            </#if>
        </#if>
	</@formGroup>
</#macro>

<#macro messages errors=[] infos=[] warnings=[] errors_class="alert alert-danger" infos_class="alert alert-info" warnings_class="alert alert-warning">
    <#if errors??>
        <#if errors?size &gt; 0 >
            <div class="alert alert-danger" id="messages_errors_div">
                <button class="close"></button>
                <#list errors as error >
                    <span class="icon"><i class="fa fa-exclamation-circle"></i></span> ${error.message} <br>
                </#list>
            </div>
        </#if>
    </#if>
    <#if infos??>
        <#if infos?size &gt; 0 >
            <div class="alert alert-info" id="messages_infos_div" >
                <button class="close"></button>
                <#list infos as info >
                    <span class="icon"><i class="fa fa-info-circle"></i></span> ${info.message} <br>
                </#list>
            </div>
        </#if>
    </#if>
    <#if warnings??>
        <#if warnings?size &gt; 0 >
            <div class="${warnings_class}" id="messages_warnings_div" >
                <a class="close" data-dismiss="alert" href="#">x</a>
                <#list warnings as warning >
                    <span class="icon"><i class="fa fa-info-circle"></i></span> ${warning.message} <br>
                </#list>
            </div>
        </#if>
    </#if>
</#macro>

<#---------------------------NEW MACROS------------------------------>
<#-- TABLE -->
<#-- class:  -->
<#macro table id='' class='' responsive=true condensed=true hover=true striped=false bordered=false narrow=false caption='' headBody=true collapsed=false params=''>
<#local class = class />
<#if condensed> <#local class += ' table-condensed' /> </#if>
<#if hover>     <#local class += ' table-hover' /> </#if>
<#if striped>   <#local class += ' table-striped'   /> </#if>
<#if bordered>  <#local class += ' table-bordered'  /> </#if>
<#if collapsed> <#local class += ' collapse' /> </#if>
<#if responsive><div class="table-responsive"></#if>
<table class="table ${class?trim}" <#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#if caption!=''><caption>${caption}</caption></#if>
<#if headBody><thead></#if>
	<#nested>
<#if headBody></tbody></#if>
</table>
<#if responsive></div></#if>
</#macro>

<#macro tableHead id='' class='' params=''>
<thead<#if id!=''> id="${id}"</#if><#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</thead>
</#macro>

<#macro tableBody id='' class='' params=''>
<tbody<#if id!=''> id="${id}"</#if><#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</tbody>
</#macro>

<#macro tableFoot id='' class='' params=''>
<tfoo <#if id!=''> id="${id}"</#if><#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</tfoot>
</#macro>

<#macro tableHeadBodySeparator id='' class='' params=''>
</thead>
<tbody<#if id!=''> id="${id}"</#if><#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if>>
</#macro>

<#-- MACRO TR -->
<#macro tr id='' class='' hide=[] params=''>
	<#local class += ' ' + displaySettings(hide,'') + ' ' + alignmentSettings(align) />
	<tr<#if id!=''> id="${id}"</#if><#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</tr>
</#macro>

<#-- MACRO TH -->
<#-- valign: baseline|top|middle|bottom|bottom|text-top -->
<#macro th id='' title='' scope='' class='' align='' valign='' hide=[] cols=0 xs=0 sm=0 md=0 lg=0 xl=0 colspan=0 rowspan=0 flex=false params=''>
<#local class += ' ' + displaySettings(hide,'') + ' ' + alignmentSettings(align,'text') />
<#local breakpoints = {'xs':xs, 'sm':sm, 'md':md, 'lg':lg, 'xl':xl}>
<#list breakpoints as breakpointkey,breakpointvalue>
	<#if breakpointvalue!=0>
		<#local class += ' col-${breakpointkey}-${breakpointvalue}' />
	</#if>
</#list>
<th class="<#if class != ''>${class?trim}</#if>"<#if valign!=''> style="vertical-align:${valign};"</#if><#if flex> style="display:flex;"</#if><#if id!=''> id="${id}"</#if><#if title!=''> title="${title}"</#if><#if scope!=''> scope="${scope}"</#if><#if colspan gt 0> colspan="${colspan}"</#if><#if rowspan gt 0> rowspan="${rowspan}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</th>
</#macro>

<#-- MACRO TD -->
<#-- valign: baseline|top|middle|bottom|bottom|text-top -->
<#macro td id='' class='' hide=[] align='' valign=''  xs=0 sm=0 md=0 lg=0 xl=0 colspan=0 rowspan=0 flex=false params=''  deprecated...>
<@deprecatedWarning args=deprecated />	
<#local class += ' ' + displaySettings(hide,'') + ' ' + alignmentSettings(align,'text') />
<#local breakpoints = {'xs':xs, 'sm':sm, 'md':md, 'lg':lg, 'xl':xl}>
<#local class += ' ' + responsiveDisplay('col',{'xs':xs, 'sm':sm, 'md':md, 'lg':lg, 'xl':xl}) />
<td class="<#if class != ''>${class?trim}</#if>"<#if valign!=''> style="vertical-align:${valign};"</#if><#if flex> style="display:flex;"</#if><#if id!=''> id="${id}"</#if><#if colspan gt 0> colspan="${colspan}"</#if><#if rowspan gt 0> rowspan="${rowspan}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</td>
</#macro>

<#--- MACRO SELECT (TO REPLACE "COMBO" MACROS) --->
<#macro select name items='' default_value='' id=name class='' size='' sort=false multiple=0 params='' title='' disabled=false tabIndex=0 maxLength=0 mandatory=false>
<#if propagateMandatory?? && propagateMandatory ><#local mandatory = true /></#if>
<select id="${id}" name="${name}" class="form-control<#if size!=''> input-${size}</#if><#if class!=''> input-${class}</#if>" <#if (multiple &gt; 0)>multiple size="${multiple}"</#if><#if (tabIndex &gt; 0)> tabindex="${tabIndex}"</#if><#if params!=''> ${params}</#if><#if title!=''> ${title}</#if><#if mandatory> required</#if><#if disabled> disabled</#if>>
<#if items?has_content>
	<#if sort=true>
		<#list items?sort_by("name") as item>
			<#if default_value="${item.code}">
				<option selected="selected" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
			<#else>
				<option value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
			</#if>
		</#list>
	<#else>
		<#if maxLength gt 0>
			<#list items as item>
				<#if maxLength < item.name?length >
					<#assign item_new = "..." + "${item.name?substring(item.name?length-maxLength+3)}" >
				<#else>
					<#assign item_new = "${item.name}">
				</#if>
				<#if default_value="${item.code}">
					<option selected="selected" value="${item.code}" >${item_new}</option>
				<#else>
					<option value="${item.code}" >${item_new}</option>
				</#if>
			</#list>
		<#else>
			<#list items as item>
				<#if default_value="${item.code}">
					<option selected="selected" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				<#else>
					<option value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				</#if>
			</#list>
		</#if>
	</#if>
<#else>
	<#nested>
</#if>
</select>
</#macro>

<#-- ICONS -->
<#-- Icons from FontAwesome 5.8.1 -->
<#macro icon prefix='fa-' style='' class='' title='' id='' params=''>
<#if style='docker' || style = 'github' || style='gitlab' || style='java' || style='jira' || style='jenkins' || style = 'twitter' >
	<#local prefix = 'fab ' + prefix />
<#else>
	<#local prefix = 'fas ' + prefix />
</#if>
<#switch style>
	<#case 'arrows'>
		<#local iconStyle = 'arrows-alt' />
	<#break>
	<#case 'arrows-h'>
		<#local iconStyle = 'arrows-alt-h' />
	<#break>
	<#case 'arrows-v'>
		<#local iconStyle = 'arrows-alt-v' />
	<#break>
	<#case 'clock-o'>
		<#local iconStyle = 'clock' />
	<#break>
	<#case 'close'>
		<#local iconStyle = 'times' />
	<#break>
	<#case 'external-link'>
		<#local iconStyle = 'external-link-alt' />
	<#break>
	<#case 'file-pdf-o'>
		<#local iconStyle = 'file-pdf' />
	<#break>
	<#case 'pencil'>
		<#local iconStyle = 'edit' />
	<#break>
	<#case 'refresh'>
		<#local iconStyle = 'sync' />
	<#break>
	<#default>
	<#local iconStyle = style />
</#switch>
<i class="${prefix}${iconStyle}<#if class!=''> ${class}</#if>" aria-hidden="true"<#if title!=''> title='${title}'</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>></i>
</#macro>

<#-- ICONSTACK 																					-->
<#-- iconStack 																					-->
<#-- class: par défaut 2x peut être tout autre taille voir doc FontAwesome  					-->			
<#-- nested: 2 macro @icon une class fa-stack-2x , autre avec class fa-stack-1x dans l'ordre   	-->
<#macro iconStack class='fa-2x' id='' params=''>
<span class="fa-stack ${class}"<#if id!=''> ${id}</#if><#if params!=''> ${params}</#if>>
<#nested>
</span>
</#macro>

<#-- FORM -->
<#-- type: inline/horizontal/form -->
<#-- enctype: multipart/form-data | text/plain -->
<#macro tform type='horizontal' class='' align='' hide=[] action='' method='post' name='' id='' role='' collapsed=false enctype='' params='' deprecated...>
<@deprecatedWarning args=deprecated />	
<#local class = class />
<#if align!=''><#local class += ' ' + alignmentSettings(align,'') /></#if>
<#if hide??><#local class += ' ' + displaySettings(hide,'block') /></#if>
<#if collapsed><#local class += ' collapse' /></#if>
<#switch type>
	<#case 'horizontal'>
		<#local class += ' form-horizontal'>
		<#break>
	<#case 'inline'>
		<#local class += ' form-inline'>
		<#break>
	<#default>
		<#local class += ' form'>
</#switch>
<form class="<#if class!=''>${class?trim}</#if>"<#if id!=''> id="${id}"</#if><#if action!=''> action="${action}"</#if><#if method!=''> method="${method}"</#if><#if name!=''> name="${name}"</#if><#if role!=''> role="${role}"</#if><#if method='post' && enctype!=''> enctype='${enctype}'</#if><#if params!=''> ${params}</#if>>
<#nested>
</form>
</#macro>


<#-- FORM ELEMENT STRUCTURE -->
<#-- formStyle values: empty/inline/horizontal/navbar-form/navbar-left... Default is horizontal -->
<#-- groupStyle: success/warning/error... -->
<#-- showLabel is deprecated in Lutece v7 -->
<#macro formGroup class='' formStyle='horizontal' groupStyle='' rows=1 labelKey='' labelFor='' labelId='' labelClass='' helpKey='' id='' mandatory=false hideLabel=[] collapsed=false params=''  deprecated...>
<@deprecatedWarning args=deprecated />	
<#local displayLabelClass = displaySettings(hideLabel,'') />
<#if collapsed><#local class += ' collapse' /></#if>
<div class="form-group<#if groupStyle!=''> has-${groupStyle} has-feedback</#if><#if class!=''> ${class?trim}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if rows=1>
		<#if labelKey!='' && formStyle='horizontal'>
			<#local labelClass += ' col-xs-12 col-sm-3 control-label'>
			<#local divClass = 'col-xs-12 col-sm-9 col-md-6'>
		<#elseif formStyle = 'inline'>
			<#local labelClass += ''>
		<#else>
			<#local divClass='col-xs-12 col-sm-offset-3 col-sm-6'>
		</#if>
	<#else>
		<#local labelClass += ' col-xs-12'>
		<#local divClass = 'col-xs-12'>
	</#if>
	<#if labelKey!=''>
	<label class="${labelClass?trim}" for="${labelFor}"<#if labelId!=''> id="${labelId}"</#if>>
		<span<#if displayLabelClass!=''> class="${displayLabelClass}"</#if>>${labelKey}</span>
		<#if mandatory=false>
			&#160;
		<#elseif mandatory=true>
			&#160;<@icon style='asterisk' />
		</#if>
	</label>
	</#if>
	<#if formStyle='horizontal'>
	<div class="${divClass}">
	</#if>
		<#assign propagateMandatory = mandatory>
		<#nested>
		<#assign propagateMandatory = false>
		<#if class='success'>
			<@icon style='check' class='form-control-feedback' />
		<#elseif class='warning'>
			<@icon style='warning' class='form-control-feedback' />
		<#elseif class='error'>
			<@icon style='close' class='form-control-feedback' />
		</#if>
		<#if helpKey!='' && formStyle!='inline'><span class="help-block" <#if labelFor!=''>id="${labelFor}_help"</#if>>${helpKey}</span></#if>
	<#if formStyle="horizontal">
	</div>
	</#if>
</div>
</#macro>

<#macro formField class=''>
<div class="row ${class}">
<#nested>
</div>
</#macro>

<#-- showLabel is deprecated in Lutece v7 -->
<#macro formLabel class='' labelFor='' labelId='' labelKey='' hideLabel=[] mandatory=true deprecated...>
<@deprecatedWarning args=deprecated />	
<#local class += ' ' + displaySettings(hideLabel,'') />
<label class="<#if class !=''>${class?trim}</#if>" for="${labelFor}" <#if labelId!=''> id="${labelId}"</#if><#if mandatory=true>ariaLabel="${labelKey} [#i18n{portal.users.modify_attribute.labelMandatory}]"</#if>>${labelKey}</label>
</#macro>

<#macro formHelp style='inline' class='' labelFor=''>
<span class="help-block<#if class!=''> ${class}</#if>" <#if labelFor!=''>id="${labelFor}_help"</#if>>
<#nested>
</span>
</#macro>

<#-- INPUT TEXT/TEXTAREA/SEARCH/PASSWORD/EMAIL/FILE -->
<#-- type : text/textarea/password/email/file/number. Default is text -->
<#-- size: input-xs/input-sm/input-lg -->
<#-- pattern: [A-F][0-9]{5} -->
<#-- language: for input type DATE and datepickers -->
<#macro input name type='text' value='' class='' size='' inputSize=0 maxlength=0 placeHolder='' rows=4 cols=40 richtext=false tabIndex='' id='' disabled=false readonly=false pattern='' title='' min=0 max=0 params='' mandatory=false language=.lang minDate='' maxDate='' defaultDate='' minTime='' maxTime='' defaultTime=''>
<#if propagateMandatory?? && propagateMandatory ><#local mandatory = true /></#if>
	<#if type='textarea'>
		<textarea name="${name}" class="form-control<#if size!=''> input-${size}</#if><#if class!=''> ${class}</#if><#if richtext> richtext</#if>" rows="${rows}" cols="${cols}"<#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if placeHolder!=''> placeholder="${placeHolder}"</#if><#if title!=''> title="${title}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if pattern!=''>pattern=${pattern}</#if><#if (mandatory && !richtext)> required</#if><#if labelFor?? && labelFor!='' && helpKey?? && helpKey!=''> aria-describedby="${labelFor}_help"</#if>><#nested></textarea>
	<#elseif type='text' || type='search' || type='password' || type='email' || type='file' || type='number'>
		<input class="form-control<#if size!=''> input-${size}</#if><#if class!=''> ${class}</#if>" type="${type}" name="${name}" value="${value}"<#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if placeHolder!=''> placeholder="${placeHolder}"</#if><#if title!=''> title="${title}"</#if><#if maxlength &gt; 0> maxlength="${maxlength}"</#if><#if inputSize!=0> size="${inputSize}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if pattern!=''>pattern=${pattern}</#if><#if min!=max> min="${min}"</#if><#if max!=0> max="${max}"</#if><#if mandatory> required </#if><#if labelFor?? && labelFor!='' && helpkey?? && helpKey!=''> aria-describedby="${labelFor}_help"</#if> />
	<#elseif type='date' || type='datetime' || type='daterange' || type='datetimerange'>
		<#if type='date'>
			<@getDatePickerBootstrap idField='${id}' language=language />
		<#elseif type='datetime'>
			<@getDateTimePickerBootstrap idField='${id}' language=language />
		<#elseif type='daterange'>
			<@getDateRangeFlatPicker idField='${id}' language=language />
		<#elseif type='datetimerange'>
			<@getDateTimeRangeFlatPicker idField='${id}' language=language />
		</#if>
		<#if id=''><@alert class='danger'>La saisie d'un ID pour le champ est obligatoire</@alert></#if>
		<input class="form-control<#if size!=''> input-${size}</#if><#if class!=''> ${class}</#if>" type="text" name="${name}" value="${value}"<#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if placeHolder!=''> placeholder="${placeHolder}"</#if><#if title!=''> title="${title}"</#if><#if maxlength &gt; 0> maxlength="${maxlength}"</#if><#if inputSize!=0> size="${inputSize}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if pattern!=''>pattern=${pattern}</#if><#if min!=max> min="${min}"</#if><#if max!=0> max="${max}"</#if><#if mandatory> required </#if><#if labelFor?? && labelFor!='' && helpkey?? && helpKey!=''> aria-describedby="${labelFor}_help"</#if> />
	<#elseif type='hidden'>
		<input type="hidden" name="${name}" <#if id!=''>id="${id}"</#if> value="${value}" />
	<#else><@icon style='warning' />Type not supported
	</#if>
</#macro>

<#-- STATIC TEXT -->
<#-- Bootstrap colors: muted/primary/success/info/warning/danger -->
<#-- AdminLTE colors: red/yellow/aqua/blue/black/light-blue/green/gray/navy/teal/olive/lime/orange/fuchsia/purple/maroon -->
<#macro staticText inForm=true color='' id='' params=''>
    <p class="<#if inForm>form-control-static</#if><#if color!=''> text-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
        <#nested>
    </p>
</#macro>

<#-- CHECKBOX -->
<#-- orientation: vertical/inline. Default is vertical -->
<#-- TODO  -->
<#macro checkBox name id='' labelKey=''  orientation='vertical' value='' tabIndex='' title='' disabled=false readonly=false checked=false params='' mandatory=false  deprecated...>
<@deprecatedWarning args=deprecated />	
<#if propagateMandatory?? && propagateMandatory ><#local mandatory = true /></#if>
<#if id = ''><#local id = name /></#if>
<#if orientation='vertical'><div class="checkbox"></#if>
<label<#if orientation!='vertical'> class="checkbox-inline"</#if> for="${id}" <#if title!=''> title="${title}"</#if>>
<input type="checkbox" id="${id}" name="${name}"<#if value!=''> value="${value}"</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if params!=''> ${params}</#if><#if mandatory> required</#if> />
<#if labelKey!=''>${labelKey}<#else><#nested></#if>
</label>
<#if orientation='vertical'></div></#if>
</#macro>

<#-- RADIO BUTTON -->
<#-- orientation: vertical/inline. Default is vertical -->
<#macro radioButton name id='' labelKey='' labelFor='' orientation='vertical' value='' tabIndex='' title='' disabled=false readonly=false checked=false params='' mandatory=false >
<#if propagateMandatory?? && propagateMandatory ><#local mandatory = true /></#if>
<#if orientation='vertical'><div class="radio"></#if>
<label<#if orientation!='vertical'> class="radio-inline"</#if> for="${labelFor}">
<input type="radio" id="${id}" name="${name}"<#if value!=''> value="${value}"</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if mandatory> required</#if><#if params!=''> ${params}</#if> />
<#if labelKey!=''>${labelKey}<#else><#nested></#if>
</label>
<#if orientation='vertical'></div></#if>
</#macro>


<#-- INPUT-GROUP -->
<#-- size: sm/lg/no size-->
<#macro inputGroup size='' class='' id='' params=''>
	<div class="input-group<#if size!=''> input-group-${size}</#if><#if class!=''> ${class}</#if>" <#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#macro inputGroupItem pos='' type='btn' id='' params=''>
<#-- type: btn/text. default is btn-->
<#if type = 'text'>
	<#local type = 'addon' />
</#if>
<span class="input-group-${type}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</span>
</#macro>

<#-- DROPDOWN MENU -->
<#-- class: dropdown-menu-right -->
<#-- Expected content : <li><a>Your link here</a></li> -->
<#macro dropdownMenu class='' id='' params=''>
	<ul class="dropdown-menu ${class}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</ul>
</#macro>

<#-- ROW -->
<#macro row class='' id='' collapsed=false align='' params=''>
<#if collapsed><#local class += ' ' + 'collapse' /></#if>
<#if align!=''><#local class+= ' ' + alignmentSettings(align) /></#if>
	<div class="row<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#-- COLUMNS -->
<#-- cols = col-xs- (<544px)/col-sm- (>=544px)/col-md- (>=768px)/col-lg- (>=992px)/col-xl- (>=1200px) -->
<#-- Push and Pull are deprecated in Bootstrap 4 -->
<#-- offsetXs, offsetSm, offsetMd, offsetLg and offsetXl are deprecated. Use offset={} instead where the values are listed as following: offset={'xs':int, 'sm':int, 'md':int, 'lg':int, 'xl':int} -->
<#-- Order uses flexbox. Use Order for xs/all breakpoints this way: order=int, or for other breakpoints this way: order={'sm':int, 'md':int, 'lg':int, 'xl':int} -->
<#macro columns tag='div' offset={} offsetXs=0 offsetSm=0 offsetMd=0 offsetLg=0 offsetXl=0 order={} pushXs=0 pushSm=0 pushMd=0 pushLg=0 pushXl=0 pullXs=0 pullSm=0 pullMd=0 pullLg=0 pullXl=0 xs=12 sm=0 md=0 lg=0 xl=0 id='' class='' align='' collapsed=false params=''>
<#if align!=''><#local class+= ' ' + alignmentSettings(align,'text') /></#if>
<#if collapsed><#local class += ' ' + 'collapse' /></#if>
<#if align!=''><#local class+= ' ' + alignmentSettings(align,'text') /></#if>
<#local class += ' ' + responsiveDisplay('col',{'xs':xs, 'sm':sm, 'md':md, 'lg':lg, 'xl':xl}) />
<#if offset?has_content>
	<#local class += ' ' + responsiveDisplay('offset',offset) />
<#elseif offsetXs &gt; 0 || offsetSm &gt; 0 || offsetMd &gt; 0 || offsetLg &gt; 0 || offsetXl &gt; 0>
	<#local class += ' ' + responsiveDisplay('offset',{'xs':offsetXs, 'sm':offsetSm, 'md':offsetMd, 'lg':offsetLg, 'xl':offsetXl}) />
</#if>
<#if pushXs &gt; 0 || pushSm &gt; 0 || pushMd &gt; 0 || pushLg &gt; 0 || pushXl &gt; 0>
	<#local breakpoints = {'xs':pushXs, 'sm':pushSm, 'md':pushMd, 'lg':pushLg, 'xl':pushXl} />
	<#list breakpoints as breakpointkey,breakpointvalue>
		<#if breakpointvalue!=0>
			<#local class += ' col-${breakpointkey}-push-${breakpointvalue}' />
		</#if>
	</#list>
</#if>
<#if pullXs &gt; 0 || pullSm &gt; 0 || pullMd &gt; 0 || pullLg &gt; 0 || pullXl &gt; 0>
	<#local breakpoints = {'xs':pullXs, 'sm':pullSm, 'md':pullMd, 'lg':pullLg, 'xl':pullXl} />
	<#list breakpoints as breakpointkey,breakpointvalue>
		<#if breakpointvalue!=0>
			<#local class += ' col-${breakpointkey}-pull-${breakpointvalue}' />
		</#if>
	</#list>
</#if>
	<${tag}<#if class?trim!=''> class="${class?trim}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</${tag}>
</#macro>

<#-- LISTS -->
<#macro ul id='' class='' align='' hide=[] collapsed=false params=''>
	<#if collapsed><#local class += ' ' + 'collapse' /></#if>
	<#if align!=''><#local class+= ' ' + alignmentSettings(align) /></#if>
	<#if hide??><#local class += ' ' + displaySettings(hide,'block') /></#if>
	<ul<#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
		<#nested>
	</ul>
</#macro>

<#macro li id='' params='' class=''>
		<li<#if class!=''> class="${class}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
			<#nested>
		</li>
</#macro>

<#-- DIV -->
<#macro div id='' class='' hide=[] collapsed=false align='' params=''>
	<#if collapsed><#local class += ' ' + 'collapse' /></#if>
	<#if align!=''>
	<#local class += ' ' + alignmentSettings(align,'text') />
	<div class="clearfix">
	</#if>
	<#if hide??><#local class += ' ' + displaySettings(hide,'block') /></#if>
	<div<#if class!=''> class="${class?trim}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
	<#if align!=''>
	</div>
	</#if>
</#macro>

<#-- PARAGRAPH -->
<#macro p id='' class='' hide=[] collapsed=false align='' params=''>
	<#if collapsed><#local class += ' ' + 'collapse' /></#if>
	<#local class += ' ' + alignmentSettings(align,'text') + ' ' + displaySettings(hide,'block') />
	<p<#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
		<#nested>
	</p>
</#macro>

<#-- SPAN -->
<#macro span id='' class='' hide=[] collapsed=false align='' params=''>
	<#if collapsed><#local class += ' ' + 'collapse' /></#if>
	<#local class += ' ' + alignmentSettings(align,'text') + ' ' + displaySettings(hide,'inline-flex') />
	<span<#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
		<#nested>
	</span>
</#macro>

<#-- PRE -->
<#macro pre id='' class='' hide=[] collapsed=false align='' params=''>
	<#local class += ' ' + alignmentSettings(align,'text') + ' ' + displaySettings(hide,'block') />
	<pre<#if class!=''> class="${class?trim}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
		<#nested>
	</pre>
</#macro>

<#-- TABS -->

<#-- Tab Container -->
<#-- TAB Custom AdminLTE -->
<#-- style: tabs/tabs nav-justified/pills/pills nav-stacked/pills nav-justified -->
<#macro tabs color='' style='tabs' class='' id='' hide=[] collapsed=false params=''>
	<#if collapsed><#local class += ' ' + 'collapse' /></#if>
	<#if hide??><#local class += ' ' + displaySettings(hide,'block') /></#if>
	<#assign propagateTabStyle = style />
	<div class="nav-tabs-custom<#if color!=''> ${color}</#if><#if class!=''> ${class?trim}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#-- Bootstrap UL tabs -->
<#-- type is deprecated -->
<#macro tabList style='tabs' vertical=false id='' params='' color=''>
	<#if propagateTabStyle??><#local style = propagateTabStyle /></#if>
		<ul class="nav nav-${style}<#if vertical> nav-stacked</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if vertical> style="margin-bottom:2rem;"</#if>>
			<#nested>
		</ul>
</#macro>

<#-- Tabs -->
<#-- type:  -->
<#macro tabLink class='' hide=[] id='' active=false href='' title='' tabIcon='' params=''>
<#local tabLinkClass = class />
<#if active><#local tabLinkClass += ' active' /></#if>
<li class="${tabLinkClass?trim}" role="presentation"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#local tabLinkSettings = 'role="tab" aria-expanded="false"' />
<#if href?contains('#') && href?contains('.jsp') == false>
	<#local tabLinkSettings += 'data-toggle="tab"' />
</#if>
	<@link href=href title=title params=tabLinkSettings>
		<#if tabIcon!=''><@icon style=tabIcon /></#if> ${title}&nbsp;
		<#nested>
	</@link>
</li>
</#macro>

<#-- TAB Content AdminLTE -->
<#macro tabContent id='' params=''>
<div class="tab-content"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- Tab Panel BS3 -->
<#macro tabPanel id params='' active=false>
		<div class="tab-pane fade<#if active> in active</#if>" role="tabpanel" id="${id}"<#if params!=''> ${params}</#if>>
			<#nested>
		</div>
</#macro>


<#-- ACCORDION --> 
<#-- The accordionContainer is the container for accordionPanel, which itself is the container for accordionHeader and accordionBody -->
<#-- The childId argument in accordionPanel is meant to be used in the two sub-macros: accordionHeader and accordionBody -->
<#macro accordionContainer id='' params=''>
<#if id = '' >
   <#if accordionContainerId?? == false><#assign accordionContainerId = 1 ><#else><#assign accordionContainerId = accordionContainerId + 1 ></#if>
   <#local id = 'accCont_'+ accordionContainerId >
</#if>
	<div class="box-group" id="${id}"<#if params!=''> ${params}</#if>>
		<#assign parentId = id>
		<#nested>
	</div>
</#macro>

<#macro accordionPanel color='' collapsed=true childId='' id='' params=''>
	<div class="panel box box-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#if collapsed = true>
			<#assign aClass = 'collapsed'>
			<#assign expanded = 'false'>
			<#assign childClass = 'panel-collapse collapse'>
		<#else>
			<#assign aClass = ''>
			<#assign expanded = 'true'>
			<#assign childClass = 'panel-collapse collapse in'>
		</#if>
			<#assign childId = childId>
		<#nested>
	</div>
</#macro>

<#-- ACCORDION ELEMENT --> 
<#-- The boxTools parameter is unused, kept for backwards compatibility -->
<#macro accordionHeader title='' parentId=parentId childId=childId boxTools=false id='' params='' headerIcon='' >
<div class="box-header with-border"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<h2 class="box-title">
		<a class="${aClass}" data-toggle="collapse" data-parent="#${parentId}" href="#${childId}" aria-expanded="${expanded}">
            <#if headerIcon!=''><@icon style=headerIcon /></#if> &nbsp;
			${title}
		</a>
	</h2>
	<#local nested><#nested></#local>
	<#if nested?has_content>
	<div class="box-tools">
		${nested}
	</div>
	</#if>
</div>
</#macro>

<#macro accordionBody id=childId class=childClass expanded=expanded params=''>
<div id="${id}" class="${class}" aria-expanded="${expanded}"<#if params!=''> ${params}</#if>>
	<@boxBody>
		<#nested>
	</@boxBody>
</div>
</#macro>

<#macro progressBar description='' id='' params=''>
<div class="progress"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div id="progressbar" class="progress-bar progress-bar-striped" role="progressbar">
		<div id="complexity">0%</div>
	</div>
</div>
<#if description!=''>
	<span class="progress-description">${description}</span>
</#if>
</#macro>

<#macro progress color='primary' id='' params='' value=0 min=0 max=100 text='' >
<div class="progress"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div id="progressbar" class="progress-bar progress-bar-${color}" role="progressbar" style="width: ${value}%;" aria-valuenow="${value}" aria-valuemin="${min}" aria-valuemax="${max}">
        <#if text=''>${value}%<#else>${text}</#if>
	</div>
</div>
</#macro>




<#-- INFO-BOX AdminTLE (widget) -->
<#-- color: only for the left side showing the icon. -->
<#-- bgColor: for the right side containing the text -->
<#macro infoBox color='' boxText='' boxIcon='' boxNumber='' unit='' bgColor='' progressBar='' progressDescription='' id='' params=''>
<div class="info-box<#if bgColor!=''> ${bgColor}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<span class="info-box-icon<#if color!=''> ${color}</#if>"><@icon style=boxIcon /></span>
	<div class="info-box-content">
		<span class="info-box-text">${boxText}</span>
		<span class="info-box-number">${boxNumber?string(",000")}<#if unit!=''> <small>${unit}</small></#if></span>
		<#if bgColor!='' && progressBar!=''>
		<div class="progress">
			<div class="progress-bar" style="width: ${progressBar}%"></div>
		</div>
		</#if>
		<#if progressDescription!=''>
		<span class="progress-description">${progressDescription}</span>
		</#if>
	</div>
</div>
</#macro>

<#-- TAG -->
<#-- color: default/primary/success/info/warning/danger/ -->
<#macro tag color='default' class='' size='' title='' tagIcon='' id='' params='' deprecated...>
<@deprecatedWarning args=deprecated />	
	<span class="label label-${color}<#if class!=''> ${class}</#if>"<#if title!=''> title='${title}'</#if><#if id!=''>id='${id}'</#if><#if params!=''>${params}</#if>>
        <#if tagIcon !=''>
            <@icon style=tagIcon />
        </#if>
		<#nested>
	</span>
</#macro>


<#-- BUTTON -->
<#-- bootstrap 3 : size: btn-xs/btn-sm/btn-lg -->
<#-- upcoming bootstrap 4 : size: btn-sm for small buttons/empty for medium buttons/btn-lg for large buttons -->
<#-- color: default[bootstrap4 : secondary]/primary/success/warning/danger/info -->
<#-- color (upcoming bootstrap 4): btn-outline-default/btn-outline-primary/btn-outline-success/btn-outline-warning/btn-outline-danger/btn-outline-info/ -->
<#-- style: btn-block/btn-flat/close/navbar-toggle/collapsed... -->
<#-- type: button/submit/reset -->
<#-- params: data-toggle/data-target/data-dismiss... -->
<#-- buttonIcon: icon name ex: info/check/comment/envelope... -->
<#-- iconPosition: left/right -->
<#-- cancel: switch to true for a cancellation form button. Adds the "formnovalidate" attribute to the button, as well as the right class -->
<#-- formId: contains the form ID if the button is outside of the form -->
<#-- buttonTargetId: contains the target element ID -->
<#-- showTitle, showTitleXs, showTitleSm, showTitleMd, showTitleLg are deprecated in Lutece v7 -->

<#macro button name='' id='' type='button' size='' color='' style='btn-flat' class='' params='' value='' title='' tabIndex='' hideTitle=[] showTitle=true showTitleXs=true showTitleSm=true showTitleMd=true showTitleLg=true buttonIcon='' disabled=false iconPosition='left' dropdownMenu=false cancel=false formId='' buttonTargetId='' deprecated...>
	<@deprecatedWarning args=deprecated />
	<#if cancel || color = 'default' || color='btn-default' || color='btn-secondary' || color='secondary'>
		<#local buttonColor = 'default' />
	<#elseif !cancel && color=''>
		<#local buttonColor = 'primary' />
	<#else>
		<#local buttonColor = color />
	</#if>
	
	<#-- Visibility of button title -->
	<#local displayTitleClass = displaySettings(hideTitle,'inline-flex') />
	
	<#-- Visibility of button title: backwards compatibility with Lutece v6, BS3 only -->
	<#local showTitleClass = '' />
	<#if showTitle = false><#local showTitleClass = 'sr-only' /></#if>
	<#if showTitleXs = false><#local showTitleClass = showTitleClass + ' hidden-xs' /></#if>
	<#if showTitleSm = false><#local showTitleClass = showTitleClass + ' hidden-sm' /></#if>
	<#if showTitleMd = false><#local showTitleClass = showTitleClass + ' hidden-md' /></#if>
	<#if showTitleLg = false><#local showTitleClass = showTitleClass + ' hidden-lg' /></#if>
	
	<#if style != ''>
		<#if style?contains('card-control')>
			<#if style?contains('collapse')>
				<#local widgetAction = 'collapse' />
				<div style="display:none;">
					<script>
						$(document).ready(function() {
							<#if buttonIcon = 'minus'>
							$("${buttonTargetId}").addClass("collapse in");
							<#else>
							$("${buttonTargetId}").addClass("collapse");
							</#if>
						});
					</script>
				</div>
			<#elseif style?contains('remove')>
				<#local widgetAction = 'remove' />
			</#if>
			<#local btnStyle = 'btn-flat ' + style?replace('collapse|remove', '', 'r')?trim />
		<#elseif style?contains('modal')>
			<#local widgetAction = 'modal' />
			<#local btnStyle = 'btn-flat ' + style?replace('modal', '', 'r')?trim />
		<#else>
			<#local btnStyle = 'btn-flat ' + style />
		</#if>
	</#if>
	
	<button class="<#if style!='close'>btn</#if><#if size!=''> btn-${size}</#if><#if buttonColor!=''> btn-${buttonColor}</#if><#if btnStyle!=''> ${btnStyle}</#if><#if dropdownMenu> dropdown-toggle</#if><#if class!=''> ${class}</#if>" type="${type}"<#if title!=''> title="${title}"</#if><#if name!=''> name="${name}"</#if><#if id!=''> id="${id}"</#if><#if value!=''> value="${value}"</#if><#if params!=''> ${params}</#if><#if disabled> disabled</#if><#if dropdownMenu> data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"</#if><#if widgetAction?? && widgetAction!=''><#if widgetAction = 'collapse' || widgetAction = 'modal'> data-toggle="${widgetAction}"<#elseif widgetAction = 'remove'> data-dismiss="alert"</#if></#if><#if buttonTargetId!=''> data-target="${buttonTargetId}"</#if><#if cancel> formnovalidate</#if><#if formId!=''> form="${formId}"</#if>>
		<#if buttonIcon!='' && iconPosition='left'><@icon style=buttonIcon /></#if>
		<#local nestedContent><#nested /></#local>
		<#local nestedContent = nestedContent?trim />
		<#if nestedContent=''>
			<#if displayTitleClass!=''><span class="${displayTitleClass}"></#if>
				${title}
			<#if displayTitleClass!=''></span></#if>
		</#if>
		<#if nestedContent!='' && !dropdownMenu><#if displayTitleClass!=''><span class="${displayTitleClass}"></#if><#nested><#if displayTitleClass!=''></span></#if></#if>
		<#if buttonIcon!='' && iconPosition='right'><@icon style=buttonIcon /></#if>
		<#if dropdownMenu>
		&#160;<@icon style='caret-down' />
		</#if>
	</button>
	
	<#if dropdownMenu>
		<ul class="dropdown-menu"<#if id!=''> id="${id}-content" aria-labelledby="${id}-content"</#if>>
			<#nested>
		</ul>
	</#if>
</#macro>

<#-- A BUTTON (LINK STYLED AS A BUTTON) -->
<#-- size: btn-xs/btn-sm/btn-lg -->
<#-- color: default/primary/success/warning/danger/info/ -->
<#-- style: btn-block/btn-flat/disabled/btn-app -->
<#-- icon: icon name ex: info/check/comment/envelope... -->
<#-- showTitle, showTitleXs, showTitleSm, showTitleMd, showTitleLg are deprecated in Lutece v7 -->
<#macro aButton name='' id='' href='' target='' size='' color='primary' style='btn-flat' align='' class='' params='' title='' tabIndex='' hideTitle=[] buttonIcon='' disabled=false iconPosition='left' dropdownMenu=false deprecated...>
<@deprecatedWarning args=deprecated />	
	<#-- Bootstrap 4 transition -->
	<#if color='secondary'>
		<#local color_temp='default'>
	<#else>
		<#local color_temp=color>
	</#if>
		
	<#-- Visibility of button title -->
	<#local displayTitleClass = displaySettings(hideTitle,'inline-flex') />
	
	<#local class += ' ' + alignmentSettings(align,'') />
	
	<a class="btn<#if size!=''> btn-${size}</#if><#if color_temp!=''> btn-${color_temp}</#if><#if style!=''> ${style}</#if><#if class!=''> ${class}</#if>"<#if name!=''> name="${name}"</#if><#if id!=''> id="${id}"</#if> href="${href}" title="${title}"<#if target!=''> target="${target}"</#if><#if params!=''> ${params}</#if><#if disabled> disabled</#if><#if dropdownMenu> data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"</#if>>
		<#if buttonIcon!='' && iconPosition='left'><@icon style=buttonIcon /></#if>
		
		<span class="<#if displayTitleClass!=''>${displayTitleClass}</#if>">${title}</span>
		
		<#if buttonIcon!='' && iconPosition='right'><@icon style=buttonIcon /></#if>
		<#if dropdownMenu>
		&#160;<@icon style='caret-down' />
		</#if>
		<#if !dropdownMenu>
		<#nested>
		</#if>
	</a>
		<#if dropdownMenu>
		<ul class="dropdown-menu"<#if id!=''> id="${id}-content" aria-labelledby="${id}"</#if>>
			<#nested>
		</ul>
		</#if>
</#macro>

<#-- BTN TOOLBAR -->
<#macro btnToolbar id='' class='' align='' ariaLabel='' params=''>
<#if align!=''><#local class += ' ' + alignmentSettings(align) /></#if>
<div class="btn-toolbar<#if class!=''> ${class?trim}</#if>" role="toolbar"<#if ariaLabel!=''> aria-label="${ariaLabel}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- BTN GROUP -->
<#-- size: sm/empty/lg -->
<#-- align: left/center/right -->
<#macro btnGroup align='' size='' class='' id='' params='' ariaLabel='' hide=[]   deprecated...>
<@deprecatedWarning args=deprecated />	
<#local class += ' ' + displaySettings(hide,'') + ' ' + alignmentSettings(align,'') />
<div class="btn-group<#if size!=''> btn-group-${size}</#if><#if class!=''> ${class?trim}</#if>" role="group"<#if ariaLabel!=''> aria-label="${ariaLabel}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- Radio button/Checkbox as buttons (to use with btnGroup)  -->
<#-- type: radio/checkbox -->
<#macro btnGroupRadioCheckbox type='checkbox' color='primary' size='' name='' id='' params='' ariaLabel='' labelFor='' labelKey='' labelParams='' tabIndex='' value='' checked=false>
<label class="btn btn-${color}<#if size!=''> btn-${size}</#if>" for="${labelFor}"<#if labelParams!=''> ${labelParams}</#if>>
<input type="${type}" name="${name}" id="${id}" autocomplete="off"<#if value!=''> value="${value}"</#if><#if params!=''> ${params}</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if> /><#if labelKey!=''>${labelKey}</#if>
</label>
</#macro>


<#-- Simple links a href, anchors -->
<#macro link href='' class='' id='' name='' title='' alt='' target='' params=''>
	<a href="${href}"<#if class!=''> class="${class}"</#if><#if id!=''> id="${id}"</#if><#if name!=''> name="${name}"</#if><#if target!=''> target="${target}"</#if><#if title!=''> title="${title}"</#if><#if alt!=''> alt="${alt}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</a>
</#macro>


<#-- MODAL -->
<#-- bgColor: modal-default/modal-primary/modal-info/modal-warning/modal-danger -->
<#macro modal id params='' bgColor='' size=''>
<div class="modal ${bgColor} fade" tabindex="-1" role="dialog" id="${id}" data-toggle="modal"<#if params!=''> ${params}</#if>>
	<div class="modal-dialog<#if size!=''> modal-${size}</#if>" role="document">
		<div class="modal-content">
			<#nested>
		</div>
	</div>
</div>
</#macro>

<#macro modalHeader titleLevel='h4' modalTitle='' id='' params=''>
<div class="modal-header"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		<span aria-hidden="true">&times;</span>
	</button>
	<${titleLevel} class="modal-title">${modalTitle}</${titleLevel}>
</div>
</#macro>

<#macro modalBody id='' params=''>
<div class="modal-body"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#macro modalFooter id='' params=''>
<div class="modal-footer"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- BREADCRUMBS -->
<#macro breadcrumbs id='' params=''>
<ol class="breadcrumb"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</ol>
</#macro>

<#macro breadcrumbItem class='' id='' params=''>
<li<#if class!=''> class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</li>
</#macro>

<#-- CALLOUT -->
<#-- AdminLTE classes: info/warning/danger/success -->
<#macro callOut color='' titleLevel='h3' title='' callOutIcon='' id='' params=''>
<div class="callout callout-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if title!=''><${titleLevel}><@icon style=callOutIcon /> ${title}</${titleLevel}></#if>
	<#nested>
</div>
</#macro>

<#-- ALERT -->
<#-- classes: alert-success/alert-info/alert-warning/alert-danger + alert-dismissible -->
<#-- color: primary/success/info/warning/dange r-->
<#macro alert class='' color='' titleLevel='h3' title='' iconTitle='' dismissible=false id='' params=''>
<div class="alert ${class}<#if color!=''> alert-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if dismissible>
		<@button color='' size='' style='close' params='data-dismiss="alert" aria-hidden="true"'>
			&times;
		</@button>
	</#if>
	<#if title!=''>
	<${titleLevel}>
		<#if iconTitle!=''><@icon style=iconTitle /></#if>
		${title}
	</${titleLevel}>
	</#if>
	<#nested>
</div>
</#macro>



<#---------------------------------------->
<#-- AdminLTE Box -->
<#-- color: default/primary/info/success/warning/danger -->
<#-- style: solid (no top border) -->
<#-- collapsed: true/false -->
<#macro box color='' id='' style='' class='' params='' collapsed=false>
<div class="box<#if color!=''> box-${color}</#if><#if style!=''> box-${style}</#if><#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- The boxTools parameter is unused, kept for backwards compatibility -->
<#macro boxHeader title='' i18nTitleKey='' hideTitle=[] showTitle=true id='' params='' boxTools=false titleLevel='h2'>
<div class="box-header with-border"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<${titleLevel} class="box-title<#if showTitle=false> sr-only</#if>"><#if title!=''>${title}</#if><#if i18nTitleKey!=''>#i18n{${i18nTitleKey}}</#if></${titleLevel}>
	<#local nested><#nested></#local>
	<#if nested?has_content>
	<div class="box-tools">
		${nested}
	</div>
	</#if>
</div>
</#macro>

<#macro boxBody class='' collapsed=false align='' id='' params=''>
<#if collapsed><#local class += ' ' + 'collapse' /></#if>
<#if align!=''><#local class += ' ' + alignmentSettings(align,'text') /></#if>
<div class="box-body<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#macro boxFooter class='' align='' id='' params=''>
<#if align!=''><#local class += ' ' + alignmentSettings(align,'text') /></#if>
<div class="box-footer<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>
<#---------------------------------------->

<#-- AdminLTE Small Box -->
<#-- color: Bootstrap + AdminLTE colors -->
<#-- unit: %,... -->
<#macro smallBox color='' title='' text='' boxIcon='' titleLevel='h3' unit='' url='' urlText='' id='' params='' fontSize='40px'>
<div class="small-box<#if color!=''> bg-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div class="inner">
		<p>${text}</p>
		<${titleLevel} style="font-size:${fontSize};">${title}<#if unit!=''> &nbsp; ${unit}</#if></${titleLevel}>
	</div>
	<div class="icon">
		<@icon style=boxIcon />
	</div>
	<#if url!=''>
	<a class="small-box-footer" href="${url}">${urlText} <@icon style='arrow-circle-right' /></a>
	</#if>
</div>
</#macro>

<#-- AdminLTE Error Page -->
<#-- Error Type: 500,404... -->
<#-- Color: primary/blue/navy/aqua/teal/green/orange/yellow/red/purple/maroon/gray/black... -->
<#macro errorPage color='' errorType='' id='' params=''>
<div class="error-page"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<h2 class="headline text-${color}">${errorType}</h2>
	<div class="error-content">
		<h3>
			<@icon style='warning' class='text-${color}' />
			<#if errorType=='404'>
				#i18n{portal.util.error404.title}
			<#elseif errorType='500'>
				#i18n{portal.util.error500.title}
			<#else>...
			</#if>
		</h3>
		<p>
			<#if errorType=='404'>
				#i18n{portal.util.error404.text} 
			<#elseif errorType='500'>
				#i18n{portal.util.error500.text} 
			<#else>...
			</#if>
		</p>
		<@aButton href='' size='' color='bg-${color}' style='btn-flat'>
			<@icon style='home' />
			#i18n{portal.util.labelBackHome}
		</@aButton>
	</div>
</div>
</#macro>

<#-- CONTEXTUAL BACKGROUND P-->
<#-- Bootstrap colors: primary/success/info/warning/danger -->
<#-- AdminTLE colors: gray/gray-light/black/red/yellow/aqua/blue/light-blue/green/navy/teal/olive/lime/orange/fuchsia/purple/maroon -->
<#macro coloredBg color='' type='p' id='' params=''>
<${type} class="bg-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</${type}>
</#macro>

<#macro listGroup id='' params=''>
<ul class="list-group"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</ul>
</#macro>

<#macro listGroupItem id='' params=''>
<li class="list-group-item"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</li>
</#macro>

<#macro unstyledList id='' params=''>
<ul class="unstyled"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#assign liClass = "margin">
	<#nested>
</ul>
</#macro>

<#-- DROPDOWN MENU LIST -->
<#macro dropdownList id='' params=''>
<ul class="dropdown-menu"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</ul>
</#macro>

<#macro dropdownItem class='' href='' title='' id='' params=''>
<li>
	<a href="${href}" class="dropdown-item<#if class!=''> ${class}</#if>" title="${title}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>${title}</a>
</li>
</#macro>

<#-- NAVBAR -->
<#macro navBar tag='nav' class='' id='' params=''>
<${tag} class="navbar<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</${tag}>
</#macro>

<#-- NAV -->
<#macro nav tag='nav' type='tab' class='' id='' params=''>
<${tag} class="nav nav-${type!}<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</${tag}>
</#macro>

<#-- NAVITEM -->
<#macro navItem href='' name='' active=false title='' alt='' target='' tag='li' class='' id='' params=''>
<${tag} class="nav-link<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if href !='' >
		<@link class='nav-link' href=href name=name title=title alt=alt target=target active=active /> 
	</#if>
	<#nested>
</#${tag}>
</#macro>

<#-- CARDS -->
<#macro card header=false headerTitle='' headerIcon=false headerTitleIcon=''>
<div class="panel panel-default">
	<#if header><div class="panel-heading"><#if headerIcon><@icon style='${headerTitleIcon}' />&#160;</#if>${headerTitle}</div></#if>
	<div class="panel-body">
		<#nested>
	</div>
</div>
</#macro>

<#-- FUNCTION: DISPLAY -->
<#-- This function returns a "visible" or "hidden" class for any component -->
<#-- breakpoints: "all" || "xs"/"sm"/"md"/"lg" -->
<#-- display: unused -->
<#function displaySettings breakPoints=[] display=''>
	<#local breakPointsOrdered = [] />
	<#if breakPoints?seq_contains("all")>
		<#local breakPointsOrdered += ["all"] />
	</#if>
	<#if breakPoints?seq_contains("xs")>
		<#local breakPointsOrdered += ["xs"] />
	</#if>
	<#if breakPoints?seq_contains("sm")>
		<#local breakPointsOrdered += ["sm"] />
	</#if>
	<#if breakPoints?seq_contains("md")>
		<#local breakPointsOrdered += ["md"] />
	</#if>
	<#if breakPoints?seq_contains("lg")>
		<#local breakPointsOrdered += ["lg"] />
	</#if>

	<#local displayClass = '' />
	<#if breakPointsOrdered?? && breakPointsOrdered?size &gt; 0>
		<#list breakPointsOrdered as breakPoint>
			<#if breakPoint = "all">
				<#local displayClass = 'hidden' />
			<#elseif breakPoint = "xs">
				<#local displayClass = displayClass + ' hidden-xs' />
			<#elseif breakPoint = 'sm'>
				<#local displayClass = displayClass + ' hidden-sm' />
			<#elseif breakPoint = 'md'>
				<#local displayClass = displayClass + ' hidden-md' />
			<#elseif breakPoint = 'lg'>
				<#local displayClass = displayClass + ' hidden-lg' />
			<#else>
				<#local displayClass = displayClass + ' undefined_breakpoint' />
			</#if>
		</#list>
	</#if>
	<#return displayClass?trim>
</#function>

<#-- This function returns responsive classes -->
<#-- type: col|offset -->
<#function responsiveDisplay type='' breakpoints={}>
	<#local responsiveDisplayClass = '' />
	<#list breakpoints as breakpointkey,breakpointvalue>
		<#if breakpointvalue!=0>
			<#if type = 'col'>
				<#local responsiveDisplayClass += ' ${type}-${breakpointkey}-${breakpointvalue}' />
			<#elseif type = 'offset'>
				<#local responsiveDisplayClass += ' col-${breakpointkey}-${type}-${breakpointvalue}' />
			</#if>
		</#if>
	</#list>
	<#return responsiveDisplayClass?trim>
</#function>

<#function alignmentSettings align='' style=''>
	<#local x = ''>
	<#if align !=''>
		<#if align = 'left'>
			<#local x = 'pull-left' />
		<#elseif align = 'right'>
			<#if style = 'text'>
				<#local x = 'text-right' />
			<#elseif style = '' />
				<#local x = 'pull-right' />
			</#if>
		<#elseif align = 'center'>
			<#local x = 'text-center' />
		<#else>
		</#if>
	</#if>
	<#return x>
</#function>

<#-- NEW MACRO LUTECE-2221 -->
<#-- MACRO adminHeader -->
<#macro adminHeader site_name=site_name>
<script src="js/admin/jquery/jquery-3.5.1.min.js"></script>
<script src="js/admin/jquery/jquery-migrate-3.3.1.min.js"></script>
</head>
<body class="skin-blue-light hold-transition sidebar-mini" data-spy="scroll" data-target="#scrollspy">
	<div class="wrapper">
	  <header class="main-header" role="banner" data-menu="${menu_pos}">
		<nav class="navbar navbar-fixed-top" role="navigation">
			<div class="navbar-header">
				<div class="nav-item">
					<a href="${prod_base_url!}jsp/site/Portal.jsp" title="#i18n{portal.users.admin_header.title.viewSite} ${site_name}" target="_blank" class="navbar-brand">
						<img src="#dskey{portal.site.site_property.logo_url}" class="img-responsive"  title="#i18n{portal.users.admin_header.title.viewSite} ${site_name}" alt="${site_name}"><b> <#if site_name?length &gt; 18> ${site_name?substring(0,16)}... <#else> ${site_name}</#if></b>
					</a>
				</div>
			  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
				<i class="fa fa-bars"></i>
			  </button>
			</div>
			<div class="collapse navbar-collapse" id="navbar-collapse">
			  <ul id="top" class="nav navbar-nav">
				<#list feature_group_list as feature_group>
				   <#if feature_group.features?size &gt; 1>
					 <li class="dropdown tasks-menu">
					   <a data-toggle="dropdown" class="dropdown-toggle" id="dLabel${feature_group.id}Header" href="${admin_url}#${feature_group.id}">
						   ${feature_group.label} <b class="caret"></b>
					   </a>
					   <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel${feature_group.id}Header">
						 <#list feature_group.features as feature>
						   <li class="menu">
							 <#if !feature.externalFeature>
								<a href="${feature.url}?plugin_name=${feature.pluginName}">${feature.name}</a>
							 <#else>
								 <a href="${feature.url}"><#if feature.iconUrl?has_content><i class="${feature.iconUrl}"></i></#if> ${feature.name}</a>
						  </#if>
						   </li>
						 </#list>
					   </ul>
					 </li>
				   <#else>
					 <#list feature_group.features as feature>
					   <li>
						  <#if !feature.externalFeature>
							 <a href="${feature.url}?plugin_name=${feature.pluginName}">${feature.name}</a>
						  <#else>
							<a href="${feature.url}"><#if feature.iconUrl?has_content><i class="${feature.iconUrl}"></i></#if>${feature.name}</a>
						  </#if>
						</li>
					   </#list>
					 </#if>
			   </#list>
			  </ul>
			  <ul class="nav navbar-nav navbar-right user">
				<li class="home">
				  <a href="${admin_url}" title="#i18n{portal.users.admin_header.homePage}"><i class="fa fa-home"></i></a>
				</li>
                <#if user.userLevel == 0>
                <li class="home">
                    <a href="jsp/admin/AdminTechnicalMenu.jsp" title="#i18n{portal.admindashboard.view_dashboards.title}">
                          <i class="fa fa-cog"></i>
                    </a>
				</li>
                </#if>
				<li class="dropdown user-menu">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="dLabelUserHeader">
					<#if adminAvatar> 
						<img src="servlet/plugins/adminavatar/avatar?id_user=${user.userId}" id="admin-avatar" class="user-image" alt="User's avatar"> 
					<#else> 
						<img src="#dskey{portal.site.site_property.avatar_default}" id="admin-avatar" class="user-image" alt="User's avatar"> 
					</#if>     
					<span id="zone4" class="hidden-sm hidden-md"> ${dashboard_zone_4}<i class="caret"></i></span>
				  </a>
					<#if userMenuItems?has_content>   
						<ul class="dropdown-menu" role="menu" aria-labelledby="dLabelUserHeader">
                            <#list userMenuItems as item>
                                <li class="${item.itemClass?html}">${item.content}</li>
                            </#list>
						</ul>
					</#if>
				</li>
				<#if admin_logout_url?has_content>
				  <li>
					<a href="${admin_logout_url}" title="#i18n{portal.users.admin_header.deconnectionLink}">
					  <i class="fa fa-power-off fa-fw"></i> <span class="visible-xs">#i18n{portal.users.admin_header.deconnectionLink}</span>
					</a>
				  </li>
				</#if>
				<!--
				<li>
				  <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i> </a>
				</li>
			  -->
			  </ul>
			</div>
		</nav>
	  </header>
	  <!-- Wrapper -->
	  <div id="admin-wrapper">
			<section class="content">
		  	<!-- Close in footer -->
	
</#macro>


<#-- MACRO adminFooter -->
<#macro adminFooter >
<!-- end content section -->
</section>
<!--  end admin-wrapper -->
</div>
<!-- end wrapper -->
</div>
<!-- footer menu -->
<footer class="hidden-xs">
<nav id="footer" class="navbar navbar-default" role="navigation">
	<div class="navbar-text footer-lutece">
		<a class="navbar-link" href="https://lutece.paris.fr" target="lutece" title="#i18n{portal.site.portal_footer.labelPortal}">
			<img src="images/poweredby.png" alt="#i18n{portal.site.portal_footer.labelMadeBy}">
			<small>version ${version}</small>
		</a>
	</div>
</nav>
</footer>
<!-- Included JS Files -->
<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<@coreAdminJSLinks />
${javascript_files}
<script>
var AdminLTEOptions = {
//Bootstrap.js tooltip
enableBSToppltip: false
};
</script>
</#macro>

<#-- MACRO adminHome -->
<#macro adminHome >
<@row>
	<@columns class='widget'>
			<section class="dashboard-widgets">
				<@row>
					<@columns sm=4 md=4 lg=4 class='widget lutece-dashboard'>
						<#if dashboard_zone_1?has_content>
							${dashboard_zone_1}
						</#if>
						<div>&nbsp;</div>
					</@columns>
					<@columns sm=4 md=4 lg=4 class='widget lutece-dashboard'>
						<#if dashboard_zone_2?has_content>
							${dashboard_zone_2}
						</#if>
						<div>&nbsp;</div>
					</@columns>
					<@columns sm=4 md=4 lg=4 class='widget lutece-dashboard'>
						<#if dashboard_zone_3?has_content>
							${dashboard_zone_3}
						</#if>
						<div>&nbsp;</div>
					</@columns>
				</@row>
			</section>
	</@columns>
</@row>
</#macro>

<#-- adminContentHeader  -->
<#macro adminContentHeader >
<section class="content-header">
	<h1>
        <#if feature_url?? && feature_title??>
            <a href="${feature_url}" title="${feature_title!''}">${feature_title!''}</a>
            <#else>
                ${feature_title!''}
            </#if>
		<#if page_title?has_content><small>${page_title}</small></#if>
	</h1>
	<@adminHeaderDocumentationLink />
</section>
<section class="content <#if feature_url?? && feature_url?ends_with('AdminSite.jsp')>no-padding</#if>">
</#macro>

<#-- adminLoginPage  -->
<#macro adminLoginPage title='' site_name='SITE_NAME'>
<script src="js/admin/jquery/jquery-3.5.1.min.js"></script>
</head>
<body id="login">
	<section>
		<div class="headless-wrapper">
			<div class="headless-content">
				<div id="login-page">
					<img src="images/logo-header.png" id="logoLogin" title="LUTECE Back-Office" alt="LUTECE Back-Office">
					<div class="login-box">
						<div class="login-logo bg-primary">
						<a href="jsp/site/Portal.jsp" title="${site_name}">#i18n{portal.admin.admin_login.welcome}<br> <b>${site_name}</b></a>
						</div>
						<div class="login-box-body">
							<div class="login-box-header">
								<p class="text-center">${title}</p>
							</div>
							<#nested>
							<p class='text-center'>
								<@aButton href='http://fr.lutece.paris.fr' params='target="_blank"' title='#i18n{portal.site.portal_footer.labelPortal}' hideTitle=['all'] color='secondary'>
									<img src="images/poweredby.png" class="thumbnails" alt="logo lutece" title="Lutece">
								</@aButton>
							</p>
						</div>
					</div>
				</div>
				<script>
				$(function() {
					var randomImages = [#dskey{portal.site.site_property.back_images}];
					var rndNum = Math.floor(Math.random()*(randomImages.length));
					var bgImg = 'url(' + randomImages[rndNum] + ')';
					$("#login-page").css('background-image', bgImg );
				});
				</script>
</#macro>

<#-- adminHeaderDocumentationLink  -->
<#macro adminHeaderDocumentationLink >
<ol class="breadcrumb ${feature_group!?lower_case}">
  <#if feature_documentation?has_content >
	<#if feature_documentation?exists>
		<li>
			<a target="_blank" href="${feature_documentation}" title="#i18n{portal.features.documentation.help}">
				<i class="fa fa-life-ring" ></i> #i18n{portal.features.documentation.help}
			</a>
		</li>
	</#if>
</#if>
</ol>
</#macro>

<#macro adminSiteColumnOutline columnid=''>
<div class="admin_column_outline">
	<span class="admin_column_id">${i18n("portal.site.columnId",columnid)}</span>
	<#nested>
</div>
</#macro>

<#-- adminMessagePage  -->
<#macro adminMessagePage title=''>
<#local alerttype="yellow" />
<#local icontype="fa-info-circle" />
<#if message.type == 2 >
   <#local alerttype="red" />
   <#local icontype="fa-question-circle" />
<#elseif message.type == 3 >
   <#local alerttype="yellow" />
   <#local icontype="fa-exclamation-circle" />
<#elseif message.type == 4 >
   <#local alerttype="yellow" />
   <#local icontype="fa-question-circle" />
<#elseif message.type == 5 >
   <#local alerttype="red" />
   <#local icontype="fa-ban" />
</#if>
<script src="js/admin/jquery/jquery-3.5.1.min.js"></script>
</head>
<body>
<div class="login-box" id="message-box">
	<div class="login-logo bg-${alerttype}">
		<strong><span class="fa ${icontype}"></span> ${title!"Info"}</strong>
	</div>
	<div class="login-box-body bg-${alerttype}">
		<p class="lead text-center">${text}</p>
		<div class="footer bg-${alerttype} text-center">
			<#nested>
		</div>	
	</div>	
</div>	
</#macro>

<#-- fieldSet  -->
<#macro fieldSet class='' fieldsetId='' fieldsetParams='' legend='' legendClass='' legendId='' legendIcon='' legendParams='' hideLegend=[] disabled=false>
<fieldset<#if class!=''> class="${class}"</#if><#if fieldsetId!=''> id="${fieldsetId}"</#if><#if fieldsetParams!=''> ${fieldsetParams}</#if><#if disabled> disabled</#if>>
	<#if legend!=''>
		<#local legendClass += ' ' +  displaySettings(hideLegend,'block') />
		<legend<#if legendClass!=''> class="${legendClass?trim}"</#if><#if legendId!=''> id="${legendId}"</#if><#if legendParams!=''> ${legendParams}</#if>><#if legendIcon!=''><@icon style=legendIcon /> </#if>${legend}</legend>
	</#if>
	<#nested>
</fieldset>
</#macro>

<#-- RESPONSIVE -->

<#-- HTML ELEMENTS -->
<#macro img url='' alt='' title='' class='' id='' params=''> 
<img src="${url}" alt="<#if alt!=''>${alt!}<#else>${title!}</#if>" title="${title}" class="thumbnails thumb-list<#if class!=''>  ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> />
</#macro>

<#-- Email Default Template -->
<#macro emailTemplate title='Lutece' footer_link='https://fr.lutece.paris.fr'> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width"/>
    <style type="text/css">
		* { margin: 0; padding: 0; font-size: 100%; font-family: 'Avenir Next', "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; line-height: 1.65; }
		img { max-width: 100%; margin: 0 auto; display: block; }
		body, .body-wrap { width: 100% !important; height: 100%; background: #f8f8f8; }
		a { color: #007bff; text-decoration: none; }
		a:hover { text-decoration: underline; }
		.text-center { text-align: center; }
		.text-right { text-align: right; }
		.text-left { text-align: left; }
		.button { display: inline-block; color: white; background: #007bff; border: solid #007bff; border-width: 10px 20px 8px; font-weight: bold; border-radius: 4px; }
		.button:hover { text-decoration: none; }
		h1, h2, h3, h4, h5, h6 { margin-bottom: 20px; line-height: 1.25; }
		h1 { font-size: 32px; }
		h2 { font-size: 28px; }
		h3 { font-size: 24px; }
		h4 { font-size: 20px; }
		h5 { font-size: 16px; }
		p, ul, ol { font-size: 16px; font-weight: normal; margin-bottom: 20px; }
		.container { display: block !important; clear: both !important; margin: 0 auto !important; max-width: 580px !important; }
		.container table { width: 100% !important; border-collapse: collapse; }
		.container .masthead { padding: 80px 0; background: #007bff; color: white; }
		.container .masthead h1 { margin: 0 auto !important; max-width: 90%; text-transform: uppercase; }
		.container .content { background: white; padding: 30px 35px; }
		.container .content.footer { background: none; }
		.container .content.footer p { margin-bottom: 0; color: #888; text-align: center; font-size: 14px; }
		.container .content.footer a { color: #888; text-decoration: none; font-weight: bold; }
		.container .content.footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<table class="body-wrap">
	<tr>
		<td class="container">
			<!-- Message start -->
			<table>
				<tr>
					<td align="center" class="masthead">
						<h1>${title}</h1>
					</td>
				</tr>
				<tr>
					<td class="content">
						<#nested>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td class="container">
			<!-- Message start -->
			<table>
				<tr>
					<td class="content footer" align="center">
							<p><a href="${footer_link}">Lutece</a></p>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>		
</#macro>

<#macro adminLanguage languages lang action='jsp/admin/DoChangeLanguage.jsp' >
<a href="javascript:return false;">
	<i class="fa fa-language"></i> #i18n{portal.admin.admin_home.language}
</a>
<@tform method='post' action=action class='form-inline'>
<input type="hidden" name="token" value="${token}">
<ul class="list-inline">
		<#list languages as language>
		<li>
			<#if lang==language.code>
				<#local languageButtonColor='success'>
			<#else>
				<#local languageButtonColor='default'>
			</#if>
			<@button color='${languageButtonColor}' type='submit' name='language' value='${language.code}' title='${language.name}'/>
		</li>
	</#list>
</ul>
</@tform>
</#macro>

<#macro adminAccessibilityMode>
<@tform method='post' action='jsp/admin/DoModifyAccessibilityMode.jsp' class='form-inline'>
	<input type="hidden" name="token" value="${token}">
	<#if user.accessibilityMode>
		<@button color='link' size='md' type='submit' buttonIcon='eye' title='#i18n{portal.users.admin_header.labelDeactivateAccessibilityMode}'/>
	<#else>
		<@button color='link' size='md' type='submit' buttonIcon='eye-slash' title='#i18n{portal.users.admin_header.labelActivateAccessibilityMode}'/>
	</#if>
</@tform>
</#macro>


<#-- scroll to top button -->
<#macro scrollTopBtn>
<a href="#" id="scroll" style="display: none;"><span></span></a>
<script>
$( function(){ 
    $(window).scroll(function(){ 
        if ( $(this).scrollTop() > 100) { 
            $('#scroll').fadeIn(); 
        } else { 
            $('#scroll').fadeOut(); 
        } 
    }); 
    $('#scroll').click(function(){ 
        $("html, body").animate({ scrollTop: 0 }, 600); 
        return false; 
    }); 
});
</script>
</#macro>

<#-- copyElementToClipboard a set of elements designed by a selector - param "selector" -->
<#-- Params																				-->
<#-- selector : Any CSS selector expression												-->
<#-- class : Default '' : List of class with double quote with comma separator 			-->
<#-- 		Possible values : "no-hover" No icon on hover - .no-hover portal_admin.css	-->
<#-- 		Possible values : "copy-icon" Icon always shown - . see portal_admin.css   	-->
<#-- 		Possible values : "copy-btn" Icon and Button styles -						-->
<#-- 		Ex for multiple classes : "class1","class2" 								-->
<#-- showMsg : Default false : If true a message is show after copy						-->
<#-- msgDone : Default "Copied" : Success message 										-->
<#-- msgError : Default "Error : not copied" : Error message							-->
<#-- Usage																				-->
<#-- Basic : <@copyElementToClipboard selector='.copy-content'  />						-->
<#-- No message : <@copyElementToClipboard selector='.copy-content' showMsg=false />	-->
<#-- No Hover : <@copyElementToClipboard selector='.copy-content' class='"no-hover"' /> -->
<#-- With icon shown : <@copyElementToClipboard selector='.copy-content' class='"copy-icon"' />	 -->
<#macro copyElementToClipboard selector class='' showMsg=true msgDone='#i18n{portal.util.copy.done}' msgError='#i18n{portal.util.copy.error}'>
<script>
const elems = document.querySelectorAll('${selector!}');
elems.forEach(elem => {
	<#if class !=''>
	elem.classList.add( ${class!} );
	</#if>
	elem.setAttribute('title', '#i18n{portal.util.labelCopy}');
  	elem.addEventListener('click', () => {
		const selection = window.getSelection();
		const range = document.createRange();
		range.selectNodeContents(elem);
		selection.removeAllRanges();
		selection.addRange(range);
		try {
			document.execCommand('copy');
			selection.removeAllRanges();
		<#if showMsg>
			const original = elem.textContent;
			elem.textContent = '${msgDone}';
			elem.classList.add('msg-success');
			setTimeout(() => {
				elem.textContent = original;
				elem.classList.remove('msg-success');
			}, 1200);
		</#if>
		} catch(e) {
		<#if showMsg>
			const original = elem.textContent;
			elem.textContent = '${msgError}';
			elem.classList.add('msg-error');
			setTimeout(() => {
				elem.textContent = original;
				elem.classList.remove('msg-danger');
			}, 1200);
		</#if>
    	}
  	});
});
</script>
</#macro>

<#-- initToast  				-->
<#-- Params						-->
<#-- layout='popups' 			-->
<#-- position='top-right' 		-->
<#-- closer=false 				-->
<#-- sticky=false 				-->
<#-- progressbar=true 			-->
<#-- theme='default'			-->
<#-- duration=3000 				-->
<#-- pool=5						-->
<#macro initToast layout='popups' position='top-right' closer=true sticky=false progressbar=true insert='before' theme='default' duration=3000 pool=5 >
<script>
$( function(){
	var lutecepolipop = new Polipop('lutecepop', {
		layout: '${layout}',
		position: '${position}',
		theme: '${theme}',
		life: ${duration?c},
		insert: '${insert}',
		closer: ${closer?c},
		closeText : '#i18n{portal.util.labelClose}',
		sticky: ${sticky?c},
		progressbar: ${progressbar?c},
		pool: ${pool},
	});
	<#-- Add addToast macro in your template -->
	<#nested>
});
</script>
</#macro>

<#-- addToast  															-->
<#-- Params																-->
<#-- title : Default "Error : not copied" : Error message				-->
<#-- msg : Default "Copied" : Success message 						  	-->
<#-- type : Default "default" ['info', 'danger', 'success' 'warning'] 	-->
<#macro addToast title content type='default' >
lutecepolipop.add({
    content: '${content}',
    title: '${title}',
    type: '${type}',
});
</#macro>

<#-- Display wrong or deprecated macro arguments -->
<#macro deprecatedWarning args=[] >
 <#if args?size != 0 ><!-- Warning : wrong or deprecated argument(s) : <#list  args?keys as key >${key}, </#list> ... --></#if>
</#macro>

