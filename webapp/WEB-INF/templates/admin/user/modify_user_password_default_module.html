<@pageContainer>
	<@pageColumn>
		<@pageHeader title='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855"></path></svg> ${user.lastName} ${user.firstName}'>
			<@item_navigation item_navigator=item_navigator />
		</@pageHeader>
		<@tabs>
			<@tabList>
				<@tabLink href='jsp/admin/user/ModifyUser.jsp?id_user=${user.userId}' title='#i18n{portal.users.actions.labelUser}' />
				<@tabLink active=true href='jsp/admin/user/ModifyUserPassword.jsp?id_user=${user.userId}' title='#i18n{portal.users.actions.labelPassword}' />
				<@tabLink href='jsp/admin/user/ModifyUserRights.jsp?id_user=${user.userId}' title='#i18n{portal.users.actions.labelRights}' />
				<@tabLink href='jsp/admin/user/ModifyUserRoles.jsp?id_user=${user.userId}' title='#i18n{portal.users.actions.labelRoles}' />
				<@tabLink href='jsp/admin/user/ModifyUserWorkgroups.jsp?id_user=${user.userId}' title='#i18n{portal.users.actions.labelWorkgroups}' />
			</@tabList>
			<@tabContent>
			<@row>
        		<@columns sm=3>
					<@tform method='post' role='form' name='modify_user' action='jsp/admin/user/DoModifyUserPassword.jsp' params='enctype="multipart/form-data"'>
						<@input type='hidden' name='id_user' value='${user.userId}' />
						<@input type='hidden' name='token' value='${token}' />
						<@formGroup labelFor='new_password' labelKey='#i18n{portal.users.modify_password_default_module.form.password.new}' helpKey='${i18n("portal.users.message.password.minimumPasswordLength",minimumPasswordSize)}' mandatory=true rows=2>
							<@inputGroup>
								<@inputGroupItem type='text'>
									<@icon style='lock' />
								</@inputGroupItem>
								<@input type='password' name='first_password' id='first_password' params='autocomplete="off"' placeHolder='#i18n{portal.users.modify_password_default_module.form.password.new}' size=''/>
								<@inputGroupItem type='text'>
									<@link href='' class='input-group-link' title='#i18n{portal.admin.admin_login.forgotLogin}' id='lutece-password-toggler' >
										<@icon style='eye' />
									</@link>
								</@inputGroupItem>
								<@inputGroupItem type='btn' pos='is-expanded'>
									<@button type='button' id='generate_password' title='#i18n{portal.users.create_user.buttonLabelGeneratePassword}' hideTitle=['all'] buttonIcon='cog' size='' color='secondary' />
								</@inputGroupItem>
							</@inputGroup>
						</@formGroup>
						<@formGroup labelKey='#i18n{portal.users.modify_password_default_module.form.password.confirm}' labelFor='confirm_new_password' mandatory=true rows=2	>
							<@inputGroup>
								<@inputGroupItem type='text'>
									<@icon style='lock' />
								</@inputGroupItem>
								<@input type='password' id='second_password' name='second_password' placeHolder='#i18n{portal.users.modify_password_default_module.form.password.confirm}' params='autocomplete="off" required="required"' size='' />
							</@inputGroup>
						</@formGroup>
						<@formGroup labelKey='#i18n{portal.users.create_user.passwordComplexity}' rows=2>
							<@passwordComplexity id="progress_bar_first_password" inputId="first_password" />
						</@formGroup>
						<@formGroup>
							<@button type='submit' buttonIcon='check' title='#i18n{portal.users.modify_password_default_module.form.button}'  color='primary' size='' />
							<@aButton href='jsp/admin/user/ManageUsers.jsp' color='secondary' buttonIcon='times' title='#i18n{portal.util.labelBack}' size='' />
						</@formGroup>
					</@tform>
				</@columns>
			</@row>
			</@tabContent>
		</@tabs>
	</@pageColumn>
</@pageContainer>
<script type="module">
	import {
			LutecePassword
		} from './js/modules/lutecePassword.js';
	
	const password = new LutecePassword();
	const generator = document.getElementById('generate_password');
	const input = document.getElementById('first_password');

	generator.addEventListener('click', () => {
		input.value = password.generatePassword();
		input.dispatchEvent(new Event('input'));
	});
	password.passTogglerInput = '#first_password'
	password.initPassToggler( );

</script>